# Gothic Forge v7.0 - Environment Template
# Copy this file to .env and fill only what's necessary.
#
# Gothic Forge Opinionated Stack (v7.0):
# - Leapcell (Go backend compute - 20 FREE projects!)
# - Cloudflare Pages + Functions (static hosting + edge compute)
# - CockroachDB Serverless (PostgreSQL-compatible database)
# - Aiven Valkey (Redis-compatible cache)
#
# Alternative compute providers: Back4app Containers, Railway

# ═══════════════════════════════════════════════════════════════
# Application Settings
# ═══════════════════════════════════════════════════════════════
APP_ENV=development
SITE_BASE_URL=http://127.0.0.1:8080
SEO_KEYWORDS=

# ═══════════════════════════════════════════════════════════════
# Server Configuration
# ═══════════════════════════════════════════════════════════════
HTTP_HOST=127.0.0.1
HTTP_PORT=8080
# LOG_FORMAT: empty for human-readable logs, 'json' for structured logs
LOG_FORMAT=
# PORT: Platform-injected port (Leapcell/Back4app/Railway auto-sets this)
PORT=

# Enable pprof endpoints under /debug/pprof (0=off, 1=on)
PPROF_ENABLE=0

# Rate limiting (per IP)
RATE_LIMIT_MAX=120
RATE_LIMIT_WINDOW_SECONDS=60

# Caching
# Disable HTML caching entirely if needed (0/1 or true/false)
DISABLE_HTML_CACHE=0
# Edge/public TTL for cacheable HTML (seconds)
CACHE_PUBLIC_TTL=60
# stale-while-revalidate window (seconds)
CACHE_SWREVAL_TTL=300

# CORS: Comma-separated origins (e.g., https://example.com,https://app.example.com)
# Use '*' only for local development
CORS_ORIGINS=

# ═══════════════════════════════════════════════════════════════
# Security
# ═══════════════════════════════════════════════════════════════
# JWT_SECRET: Generate with `gforge secrets --gen-jwt` or use 64+ random hex chars
JWT_SECRET=

# ═══════════════════════════════════════════════════════════════
# Database & Cache
# ═══════════════════════════════════════════════════════════════
# DATABASE_URL: PostgreSQL connection string (auto-populated by gforge deploy)
DATABASE_URL=

# VALKEY_URL: Redis-compatible cache (supports redis:// and rediss://)
VALKEY_URL=
# Legacy Redis URL support (VALKEY_URL takes precedence)
REDIS_URL=
# TLS skip verify: Only set to 1 if your provider explicitly requires it
VALKEY_TLS_SKIP_VERIFY=0

# ═══════════════════════════════════════════════════════════════
# OAuth (Optional)
# ═══════════════════════════════════════════════════════════════
# GitHub OAuth: Enables "Sign in with GitHub" at /auth/github/login
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
# OAuth callback base URL (defaults to SITE_BASE_URL)
OAUTH_BASE_URL=

# ═══════════════════════════════════════════════════════════════
# Build & Development (Optional)
# ═══════════════════════════════════════════════════════════════
# Skip installing templ/tailwind tools (useful for CI/testing)
GFORGE_SKIP_TOOLS=
# Base directory override for tests (affects SEO file paths)
GFORGE_BASEDIR=

# ═══════════════════════════════════════════════════════════════
# Deployment Tokens (gforge deploy)
# ═══════════════════════════════════════════════════════════════
# Leapcell: Deployment URL (created after first deploy)
# Example: https://your-app.leapcell.dev
LEAPCELL_APP_URL=

# Back4app: Deployment URL (alternative provider)
B4A_APP_URL=

# CockroachDB: API key from https://cockroachlabs.cloud/service-accounts
COCKROACH_API_KEY=

# Aiven: API token from https://console.aiven.io/profile/tokens
AIVEN_TOKEN=

# Cloudflare: API token from https://dash.cloudflare.com/profile/api-tokens
# Cloudflare API token for Pages deployment
# Create at: https://dash.cloudflare.com/profile/api-tokens
# Use template: "Edit Cloudflare Workers" with Pages permissions
CLOUDFLARE_API_TOKEN=

# Cloudflare Account ID (found in dashboard under any domain)
CLOUDFLARE_ACCOUNT_ID=

# Cloudflare Pages project name (your-project-name)
CF_PROJECT_NAME=

# DEPRECATED: Use CLOUDFLARE_* variables above (wrangler v4+ standard)
# CF_API_TOKEN=
# CF_ACCOUNT_ID=

# ═══════════════════════════════════════════════════════════════
# Auto-Provisioning Overrides (Optional)
# ═══════════════════════════════════════════════════════════════
# CockroachDB Serverless
COCKROACH_CLUSTER_NAME=gothic-forge-db
COCKROACH_REGION=us-east-1
COCKROACH_DB_NAME=app
COCKROACH_DB_USER=gothicforge

# Aiven Valkey
AIVEN_PROJECT=
AIVEN_PLAN=startup-4
AIVEN_CLOUD=aws-us-east-1
AIVEN_SERVICE_NAME=gforge-valkey

# ═══════════════════════════════════════════════════════════════
# Provider Signup Links (v7.0)
# ═══════════════════════════════════════════════════════════════
# Leapcell (compute - PRIMARY): https://leapcell.io/signup
#   • 20 FREE projects on Hobby tier!
#   • 1 FREE PostgreSQL database included
#   • Deploy via GitHub integration
# Cloudflare Pages (static hosting): https://pages.cloudflare.com/
# CockroachDB Serverless (database): https://cockroachlabs.cloud/signup
# Aiven Valkey (cache): https://console.aiven.io/signup
#
# Alternative compute providers:
# - Back4app Containers: https://www.back4app.com/signup
# - Railway: https://railway.app

# Documentation:
# - Leapcell Docs: https://docs.leapcell.io/
# - Cloudflare API tokens: https://dash.cloudflare.com/profile/api-tokens
# - Back4app Containers: https://www.back4app.com/docs-containers
# - CockroachDB quickstart: https://www.cockroachlabs.com/docs/cockroachcloud/quickstart
# - Aiven console: https://console.aiven.io/

# ═══════════════════════════════════════════════════════════════
# Security Notes
# ═══════════════════════════════════════════════════════════════
# Production Checklist:
# - Set APP_ENV=production
# - Set SITE_BASE_URL=https://your-domain.tld
# - Set CORS_ORIGINS to your domain only
# - Set LOG_FORMAT=json for structured logging
# - Generate JWT_SECRET with: gforge secrets --gen-jwt
# - CSRF middleware: automatically enabled in production
# - CSP policy: allows unpkg.com, cdn.jsdelivr.net, inline JSON-LD
# - Sessions: SameSite=Lax, Secure flag in production
# - Leapcell/Back4app/Railway bind to PORT environment variable automatically

